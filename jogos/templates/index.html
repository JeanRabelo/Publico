<!DOCTYPE html>
<html>
<head>
    <title>Interactive Board Input</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
        }
        .grid-container {
            display: inline-block;
            margin-bottom: 20px;
        }
        .grid-row {
            display: flex;
        }
        .grid-cell {
            width: 30px;
            height: 30px;
            border: 1px solid #ccc;
            text-align: center;
            line-height: 30px;
            cursor: pointer;
            user-select: none;
            font-weight: bold;
        }
        .grid-cell.active {
            background-color: #4caf50;
            color: white;
        }
        label {
            font-weight: bold;
        }
        textarea {
            width: 100%;
            font-family: monospace;
        }
        .message {
            margin-top: 20px;
            color: green;
        }
        .controls {
            margin-bottom: 20px;
        }
        .controls input {
            width: 50px;
        }
    </style>
</head>
<body>
    <h1>Interactive Board Input</h1>
    <div class="controls">
        <label for="rows">Rows:</label>
        <input type="number" id="rows" value="5" min="1" max="20">
        <label for="cols">Columns:</label>
        <input type="number" id="cols" value="5" min="1" max="20">
        <button onclick="generateBoard()">Generate Board</button>
    </div>
    <form method="post" onsubmit="return submitForm()">
        <div id="grid" class="grid-container"></div>
        <input type="hidden" name="boardData" id="boardData">
        <label for="pieces">Pieces (enter as list of arrays, e.g. [[[1,1]], [[1],[1]]]):</label><br>
        <textarea name="pieces" rows="10" cols="50">[
    [[1, 1, 1]],
    [[1, 1],
     [1, 1],
     [1, 1]],
    [[1],
     [1],
     [1],
     [1]]
]</textarea><br><br>
        <input type="submit" value="Submit">
    </form>
    {% if message %}
        <p class="message">{{ message }}</p>
    {% endif %}
    <script>
        let board = [];
        function generateBoard() {
            const rows = parseInt(document.getElementById('rows').value);
            const cols = parseInt(document.getElementById('cols').value);
            board = [];
            const gridContainer = document.getElementById('grid');
            gridContainer.innerHTML = '';
            for (let r = 0; r < rows; r++) {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'grid-row';
                board[r] = [];
                for (let c = 0; c < cols; c++) {
                    const cellDiv = document.createElement('div');
                    cellDiv.className = 'grid-cell';
                    cellDiv.textContent = '0';
                    cellDiv.dataset.row = r;
                    cellDiv.dataset.col = c;
                    cellDiv.addEventListener('click', toggleCell);
                    rowDiv.appendChild(cellDiv);
                    board[r][c] = 0;
                }
                gridContainer.appendChild(rowDiv);
            }
        }
        function toggleCell(event) {
            const cell = event.target;
            const row = parseInt(cell.dataset.row);
            const col = parseInt(cell.dataset.col);
            if (board[row][col] === 0) {
                board[row][col] = 1;
                cell.classList.add('active');
                cell.textContent = '1';
            } else {
                board[row][col] = 0;
                cell.classList.remove('active');
                cell.textContent = '0';
            }
        }
        function submitForm() {
            document.getElementById('boardData').value = JSON.stringify(board);
            return true;
        }
        // Generate default board on page load
        generateBoard();
    </script>
</body>
</html>

